
    <!-- favorites-page.component.html - VERSIÓN FINAL Y LIMPIA -->

    <div class="favorites-container">
      <h2>Mis Favoritos</h2>
      <div *ngIf="(favoritos$ | async) as favoritos; else loading">
        <div *ngIf="favoritos.length > 0; else emptyFavorites" class="favorites-grid">
          
          <div *ngFor="let favorito of favoritos" 
               class="product-card" 
               (click)="verDetalles(favorito)" 
               role="button" 
               tabindex="0" 
               [attr.aria-label]="'Ver detalles de ' + favorito.nombre">
            
            <div class="badge-discount">-28%</div>

            <div class="product-image-container">
              <img [src]="productService.getImageUrl(favorito.foto)" alt="{{ favorito.nombre }}" class="product-image">
            </div>

            <div class="product-info">
              <h4 class="product-brand">{{ favorito.subCategoriaDescripcion | uppercase }}</h4>
              <h3 class="product-name">{{ favorito.nombre }}</h3>
              <div class="price-container">
                <span class="original-price">{{ calculateOriginalPrice(favorito.precioVenta) | currency:'S/ ' }}</span>
                <span class="sale-price">{{ favorito.precioVenta | currency:'S/ ' }}</span>
              </div>
            </div>
            
            <div class="product-actions">
              <button class="remove-button" (click)="solicitarConfirmacion($event, favorito)">Quitar</button>
            </div>
          </div>

        </div>
        <ng-template #emptyFavorites>
          <div class="empty-favorites-container">
            <p>Aún no tienes productos favoritos.</p>
            <a routerLink="/tienda/home" class="explore-link">¡Explora nuestros productos!</a>
          </div>
        </ng-template>
      </div>
      <ng-template #loading>
        <p class="loading-indicator">Cargando favoritos...</p>
      </ng-template>
    </div>

    <!-- MODAL DE CONFIRMACIÓN (EL CORRECTO) -->
    <div *ngIf="modalAbierto" class="modal-overlay">
      <div class="modal-dialog">
        <p class="modal-message">{{ mensajeConfirmacion }}</p>
        <div class="modal-actions">
          <button class="modal-button cancel" (click)="cerrarModal()">Cancelar</button>
          <button class="modal-button confirm" (click)="confirmarEliminacion()">Confirmar</button>
        </div>
      </div>
    </div>
  